<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · PhaseRetrieval.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://olejorik.github.io/PhaseRetrieval.jl/stable/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>PhaseRetrieval.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Types-and-Functions"><span>Types and Functions</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><a class="tocitem" href="about/">About</a></li><li><a class="tocitem" href="tutorials/GettingStarted/">Getting Started</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="tutorials/Hardware/">Forward model</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Inverse Problem</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="Inverse/">Introduction</a></li><li><a class="tocitem" href="tutorials/Gonsalves/">Gonsalves&#39;s method</a></li><li><a class="tocitem" href="tutorials/AP/">AP-based methods</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/main/docs/src/index.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="PhaseRetrieval.jl-Documentation"><a class="docs-heading-anchor" href="#PhaseRetrieval.jl-Documentation">PhaseRetrieval.jl Documentation</a><a id="PhaseRetrieval.jl-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#PhaseRetrieval.jl-Documentation" title="Permalink"></a></h1><ul><li><a href="#PhaseRetrieval.jl-Documentation">PhaseRetrieval.jl Documentation</a></li><li class="no-marker"><ul><li><a href="#Types-and-Functions">Types and Functions</a></li><li><a href="#Index">Index</a></li><li><a href="about/#About-the-package">About the package</a></li></ul></li><li><a href="tutorials/GettingStarted/#Getting-started">Getting started</a></li><li class="no-marker"><ul><li><a href="tutorials/GettingStarted/#tutorial-forward">Forward model</a></li><li class="no-marker"><ul><li><a href="tutorials/GettingStarted/#Initialising-the-simulation">Initialising the simulation</a></li><li><a href="tutorials/GettingStarted/#Faster-creation-of-an-ImagingSensor">Faster creation of an <code>ImagingSensor</code></a></li><li><a href="tutorials/GettingStarted/#Quantisation-and-exposure-level">Quantisation and exposure level</a></li><li><a href="tutorials/GettingStarted/#Adding-the-phase-aberration">Adding the phase aberration</a></li></ul></li><li><a href="tutorials/GettingStarted/#tutorial-inverse">Inverse problem</a></li></ul></li><li><a href="tutorials/Hardware/#Hardware-types">Hardware types</a></li><li class="no-marker"><ul><li><a href="tutorials/Hardware/#Camera-chip">Camera chip</a></li><li><a href="tutorials/Hardware/#SimConfig">SimConfig</a></li></ul></li><li><a href="Inverse/#Inverse-problem">Inverse problem</a></li><li><a href="tutorials/Gonsalves/#Method-of-Gonsalves-for-small-phases">Method of Gonsalves for small phases</a></li><li><a href="tutorials/AP/#Alternative-projections-based-methods">Alternative-projections-based methods</a></li></ul><h2 id="Types-and-Functions"><a class="docs-heading-anchor" href="#Types-and-Functions">Types and Functions</a><a id="Types-and-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Types-and-Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.camerasdict" href="#PhaseRetrieval.camerasdict"><code>PhaseRetrieval.camerasdict</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`camerasdict` is a dictionary with often used cameras.</code></pre><p>Use <code>keys(camerasdict)</code> to get the list of implemented cameras.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/hardware.jl#LL280-L284">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.lensesdict" href="#PhaseRetrieval.lensesdict"><code>PhaseRetrieval.lensesdict</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`lensesdict` is a dictionary with often used cameras.</code></pre><p>Use <code>keys(lensesdict)</code> to get the list of implemented cameras.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/hardware.jl#LL287-L291">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.AbstractPRproblem" href="#PhaseRetrieval.AbstractPRproblem"><code>PhaseRetrieval.AbstractPRproblem</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Big class of general phase-retrieval-related problems.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/PRproblem.jl#LL1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.CameraChip" href="#PhaseRetrieval.CameraChip"><code>PhaseRetrieval.CameraChip</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CameraChip(pixelsize, imagesize; &lt;keyword args&gt;)</code></pre><p>Create a camera chip with a given square pixel size and image size.</p><p>You can also specify the bit depth of the camera and the channel bit depth. For instance, 12-bit camera (<code>bitdepth =12</code>) often transfer its measurement packed in 16-bit number (<code>channelbitdepth = 16</code>).</p><p>If called on a complex field, output the image seen by the chip.</p><p>See also <code>camerasdict</code>, <code>storagetype</code>, <code>intensity</code>.</p><p><strong>Arguments</strong></p><ul><li><code>pixelsize::Float64</code>: size of the pixel. Only square pixels are supported.</li><li><code>imagesize::Tuple{Int, Int}</code>: (width, height) of the image.</li><li><code>bitdepth::Int = 8</code>: bit detpth of the camera.</li><li><code>channelbitdepth::Int = 8</code>: channel bit depth of the camera. </li></ul><p>Arguments can be specified in any order.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">cam = CameraChip(;
    pixelsize=5.3um, imagesize=(1280, 1024), bitdepth=8, channelbitdepth=8
)</code></pre><pre><code class="language-julia-repl hljs">julia&gt; ap,_ = PhaseRetrieval.aperture(-1:.25:1,-1:.25:1,.8); ap
9×9 Matrix{Float64}:
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  1.0  1.0  1.0  0.0  0.0  0.0
 0.0  0.0  0.0  1.0  1.0  1.0  0.0  0.0  0.0
 0.0  0.0  0.0  1.0  1.0  1.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0

julia&gt; imf = PhaseRetrieval.toimageplane(ap);

julia&gt; cam = camerasdict[&quot;UI3860&quot;];

julia&gt; cam(imf, AutoExposure(.7)) |&gt; collect
9×9 Array{N4f12,2} with eltype FixedPointNumbers.N4f12:
 0.0051  0.0  0.0122  0.0427  0.0601  0.0427  0.0122  0.0  0.0051
 0.0     0.0  0.0     0.0     0.0     0.0     0.0     0.0  0.0
 0.0122  0.0  0.0286  0.1006  0.1411  0.1006  0.0286  0.0  0.0122
 0.0427  0.0  0.1006  0.3553  0.4987  0.3553  0.1006  0.0  0.0427
 0.0601  0.0  0.1411  0.4987  0.6999  0.4987  0.1411  0.0  0.0601
 0.0427  0.0  0.1006  0.3553  0.4987  0.3553  0.1006  0.0  0.0427
 0.0122  0.0  0.0286  0.1006  0.1411  0.1006  0.0286  0.0  0.0122
 0.0     0.0  0.0     0.0     0.0     0.0     0.0     0.0  0.0
 0.0051  0.0  0.0122  0.0427  0.0601  0.0427  0.0122  0.0  0.0051
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/hardware.jl#LL14-L73">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.Fourier" href="#PhaseRetrieval.Fourier"><code>PhaseRetrieval.Fourier</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Fourier()</code></pre><p>FFT-based method of simulation of a PSF.</p><p>See also <code>psf</code>, <code>SimConfig</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/PSF.jl#LL11-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.GS" href="#PhaseRetrieval.GS"><code>PhaseRetrieval.GS</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Gerchberg-Saxton, classical method to solve PR problem</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/PRproblem.jl#LL22-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.GSparam" href="#PhaseRetrieval.GSparam"><code>PhaseRetrieval.GSparam</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">GSparam(; ϕ⁰, maxit, maxϵ, keephistory, snapshots)</code></pre><p>Parameters for a concrete realisation of GS method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/PRproblem.jl#LL27-L31">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.ImagingLens" href="#PhaseRetrieval.ImagingLens"><code>PhaseRetrieval.ImagingLens</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ImagingLens(;focallength, aperture)</code></pre><p>Create fixed focal length lens with focus = <code>focallength</code> and aperture dimater <code>aperture</code>.</p><p>Arguments can be speciefied in any order.</p><p>See also <a href="#PhaseRetrieval.diaphragm-Tuple{ImagingLens, Float64}"><code>diaphragm</code></a>, <a href="#PhaseRetrieval.lensesdict"><code>lensesdict</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; lens = ImagingLens(300mm, 25mm)
Imaging Lens with f=300.0 mm and D=25.0 mm</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/hardware.jl#LL128-L142">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.ImagingSensor" href="#PhaseRetrieval.ImagingSensor"><code>PhaseRetrieval.ImagingSensor</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ImagingSensor(lens=lens, cam=cam)</code></pre><p>Imaging sensor or camera consisting of a lens <code>lens</code> and camera chip <code>cam</code>.</p><p>Create a sensor using keyword syntaxis (in any order), <code>lens</code> and <code>cam</code> are required</p><pre><code class="nohighlight hljs">ims = ImagingSensor(lens = ::ImagingLens, cam = ::CameraChip)</code></pre><p>See also <a href="#PhaseRetrieval.roi-Tuple{CameraChip, Tuple{Int64, Int64}}"><code>roi</code></a>, <a href="#PhaseRetrieval.diaphragm-Tuple{ImagingLens, Float64}"><code>diaphragm</code></a>.</p><p><strong>Arguments:</strong></p><ul><li><code>lens::ImagingLens</code>: lens of the camera</li><li><code>cam::CameraChip</code>: sensor chip of the camera</li></ul><p>If lens and cam are strings, corresponding values from <code>lensesdict</code> and <code>camerasdict</code> are used.</p><p>Other possible keywords to simulate misalingnment (not implemented yet)</p><ul><li><code>focal_distance = lens.focallength</code>: Distance between the lens and the sensor.</li><li><code>lensorigin = [0.,0.]</code>: nodal point, expressed in length units (<code>mm</code> or <code>um</code>)</li><li>Chip plane misalingment angles: <ul><li><code>α = 0</code>: rotation in x</li><li><code>β = 0</code>: rotation in y</li><li><code>γ = 0</code>: rotation in z</li></ul></li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; ImagingSensor(lens = ImagingLens(300mm, 25mm),
           cam = CameraChip(
               pixelsize=5.2um,
               imagesize=(1280, 1024),
               bitdepth=8,
               channelbitdepth=8
               )
           )
Imaging Sensor made with an Imaging Lens with f=300.0 mm and D=25.0 mm
 and a Camera with square pixel 5.2 μm, (1280, 1024) frame and a 8/8 bit/channel output.
 
julia&gt; diaphragm(ImagingSensor(lens = lensesdict[&quot;F300A25&quot;], cam= camerasdict[&quot;UI1540&quot;]), 10mm)
Imaging Sensor made with an Imaging Lens with f=300.0 mm and D=10.0 mm
 and a Camera with square pixel 5.2 μm, (1280, 1024) frame and a 8/8 bit/channel output.

julia&gt; ImagingSensor(&quot;F300A25&quot;,  &quot;UI1540&quot;)
Imaging Sensor made with an Imaging Lens with f=300.0 mm and D=25.0 mm
 and a Camera with square pixel 5.2 μm, (1280, 1024) frame and a 8/8 bit/channel output.</code></pre><p>See also <code>focallength</code>, <code>focaldistance</code>, <code>apdiameter</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/hardware.jl#LL165-L216">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.PRproblem" href="#PhaseRetrieval.PRproblem"><code>PhaseRetrieval.PRproblem</code></a> — <span class="docstring-category">Type</span></header><section><div><p>PRproblem(a, A)</p><p>Classical phase-retrieval problem of finding complex arrays x, X such that    |x| = a, |X| = A, and X =F(x),  where F denotes the Fourier transform.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/PRproblem.jl#LL6-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.SimConfig" href="#PhaseRetrieval.SimConfig"><code>PhaseRetrieval.SimConfig</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SimConfig(name::String, ims::PhaseRetrieval.ImagingSensor, λ::Float64; method = Fourier()) creates forward-model 
simulation environment, using algorithm defined by `method`,
for the PR problem obtained with  `ims` image sensor (camera + lens) at 
wavelength `λ`. `name` is a sting identifacator used for, for instace, plotting labels.</code></pre><p><code>SimConfig{Fourier}</code> contains the following fields:</p><pre><code class="nohighlight hljs">- name::String
- ims::PhaseRetrieval.ImagingSensor
- λ::Float64
- roi::CartesianDomain2D
- dualroi::CartesianDomain2D
- ap::Array{Float64,2}
- mask::Array{Float64,2}pixelphase::Array{Float64,2}
- diversity::Vector{Union{Nothing, Array{Float64,2}}}</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/PSF.jl#LL153-L171">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.hwConfig-Tuple{String, Any, Any, Any}" href="#PhaseRetrieval.hwConfig-Tuple{String, Any, Any, Any}"><code>PhaseRetrieval.hwConfig</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">hwConfig(s::String, f, λ, d) creates a hardware configuration with
`s` camera, lens with a focal length `f` and aperture `d` and using wavelenght
`λ`.</code></pre><p><strong>Example</strong></p><pre><code class="nohighlight hljs">conf1 = hwConfig(&quot;UI1540&quot;, 300mm, 633nm,25mm) creates a configuration
based on UI-1540 camera, with a 1 inch lens with focal length 300mm and He-Ne laser.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/hardware.jl#LL266-L275">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AlternatingProjections.AbstractProblems.solve-Tuple{PRproblem, GSparam, Vararg{Any, 5}}" href="#AlternatingProjections.AbstractProblems.solve-Tuple{PRproblem, GSparam, Vararg{Any, 5}}"><code>AlternatingProjections.AbstractProblems.solve</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">solve(pr::PRproblem, alg::GS, args...)</code></pre><p>Solve PR problem using GS method. Any change of the GS parameters can be given </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/PRproblem.jl#LL47-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.SHdiversity" href="#PhaseRetrieval.SHdiversity"><code>PhaseRetrieval.SHdiversity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">SHdiversity(size, cellsize, celloffset=0, α=0)</code></pre><p>Generate SH diversity phase of given overall <code>size</code>, <code>cellsize</code>, central cell <code>offset</code> and rotation angle <code>α</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/ShackHartmann/SHphase.jl#LL11-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.SHdiversity-Tuple{AbstractRange, AbstractRange, Any, Any, Any}" href="#PhaseRetrieval.SHdiversity-Tuple{AbstractRange, AbstractRange, Any, Any, Any}"><code>PhaseRetrieval.SHdiversity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">SHdiversity(xrange, yrange, e₁, e₂, o)</code></pre><p>Generate SH diversity phase on array <code>xrange × yrange</code> with cell based on orthogonal grid formed by vectors  <code>e₁, e₂,</code> and origin at <code>o</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/ShackHartmann/SHphase.jl#LL71-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.appsftoPR-Tuple{Any, Any}" href="#PhaseRetrieval.appsftoPR-Tuple{Any, Any}"><code>PhaseRetrieval.appsftoPR</code></a> — <span class="docstring-category">Method</span></header><section><div><p>appsftoPR(ap,psfimage) constructs a phase retrieval problem from two real arrays, representing the pupil and the focal planes intensity distributions. </p><p>The aperture and PSF are assumed to be centred in the array.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">
ap,_ = PhaseRetrieval.aperture(-1:.2:1,-1:.2:1,.8);
psfimage = psf(ap);

pr = appsftoPR(ap,psfimage)

# output
PRproblem{Float64, 2}([1.0 0.0 … 1.0 1.0; 0.0 0.0 … 0.0 1.0; … ; 1.0 0.0 … 1.0 1.0; 1.0 1.0 … 1.0 1.0], [8.857504209336042 4.432323038895129 … 8.857504209336042 10.878351222990858; 4.432323038895129 0.7324956483358351 … 4.432323038895129 6.182768610120748; … ; 8.857504209336042 4.432323038895129 … 8.857504209336042 10.878351222990858; 10.878351222990858 6.182768610120747 … 10.878351222990858 12.999999999999998])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/utils.jl#LL215-L234">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.diaphragm-Tuple{ImagingLens, Float64}" href="#PhaseRetrieval.diaphragm-Tuple{ImagingLens, Float64}"><code>PhaseRetrieval.diaphragm</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">diaphragm(lens, diam)</code></pre><p>Change the lens diameter of an <code>ImagingLens</code> or an <code>ImagingSensor</code>.</p><p>Diaphragm can be larger than the lens diameter (there is no &quot;hardware limitation&quot;).</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; diaphragm(ImagingLens(300mm, 25mm), 10mm)
Imaging Lens with f=300.0 mm and D=10.0 mm</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/hardware.jl#LL148-L161">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.focaldistance-Tuple{ImagingSensor}" href="#PhaseRetrieval.focaldistance-Tuple{ImagingSensor}"><code>PhaseRetrieval.focaldistance</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">focaldistance(ims [,z])</code></pre><p>Get/set the distance from the lens to the imaging plane.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/hardware.jl#LL242-L246">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.logrescale" href="#PhaseRetrieval.logrescale"><code>PhaseRetrieval.logrescale</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">logrescale(array, α = 5)</code></pre><p>Rescale in log-scale: maximum will correspond to 1, <span>$10^{-α}$</span> will correspond to 0.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/utils.jl#LL71-L75">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.phwrap-Tuple{AbstractFloat}" href="#PhaseRetrieval.phwrap-Tuple{AbstractFloat}"><code>PhaseRetrieval.phwrap</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Wrap Phase</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/utils.jl#LL85">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.psf-Tuple{AbstractArray}" href="#PhaseRetrieval.psf-Tuple{AbstractArray}"><code>PhaseRetrieval.psf</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">psf(amplitude, phase) -&gt; psfimage
psf(pupilfield) -&gt; psfimage</code></pre><p>Calculate psf for given amplitude and phase. Both PSF and pupil arrays are assumed     to have the origin in their center pixel (<code>(N+1)÷2</code> for dimension size <code>N</code>).</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; ap,_ = PhaseRetrieval.aperture(-1:.2:1,-1:.2:1,.8); ap
11×11 Matrix{Float64}:
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  1.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  1.0  1.0  1.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  1.0  1.0  1.0  1.0  1.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  1.0  1.0  1.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  1.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0

julia&gt; Int.(round.(psf(ap)))
11×11 Matrix{Int64}:
 18  3   1   2    0    1    0   2   1  3  18
  3  0   6   5    0    1    0   5   6  0   3
  1  6  11   4    1    5    1   4  11  6   1
  2  5   4   1   20   38   20   1   4  5   2
  0  0   1  20   78  118   78  20   1  0   0
  1  1   5  38  118  169  118  38   5  1   1
  0  0   1  20   78  118   78  20   1  0   0
  2  5   4   1   20   38   20   1   4  5   2
  1  6  11   4    1    5    1   4  11  6   1
  3  0   6   5    0    1    0   5   6  0   3
 18  3   1   2    0    1    0   2   1  3  18
</code></pre><pre><code class="language-julia-repl hljs">julia&gt; psf(ones(3,3),zeros(3,3))
3×3 Matrix{Float64}:
 0.0   0.0  0.0
 0.0  81.0  0.0
 0.0   0.0  0.0
 
julia&gt; psf(ones(Complex{Float64},4,4))
4×4 Matrix{Float64}:
 0.0  0.0    0.0  0.0
 0.0  0.0    0.0  0.0
 0.0  0.0  256.0  0.0
 0.0  0.0    0.0  0.0
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/PSF.jl#LL34-L90">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PhaseRetrieval.roi-Tuple{CameraChip, Tuple{Int64, Int64}}" href="#PhaseRetrieval.roi-Tuple{CameraChip, Tuple{Int64, Int64}}"><code>PhaseRetrieval.roi</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">roi(cam, dims)</code></pre><p>Create camera that represents centered regeion of interest (ROI) of <code>cam</code>.</p><p>ROI can be larger than the camera size! :-)</p><p><strong>Arguments</strong></p><ul><li><code>cam</code>: camera (<code>CameraChip</code>) or imaging sensor (<code>ImagingSensor</code>)</li><li><code>dims::Tuple{Int, Int}</code>: new (width, height) of the image.   Single number defines a square ROI.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/olejorik/PhaseRetrieval.jl/blob/3721131292b784c8d57119248837f1377a7bb019/src/hardware.jl#LL82-L94">source</a></section></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#PhaseRetrieval.camerasdict"><code>PhaseRetrieval.camerasdict</code></a></li><li><a href="#PhaseRetrieval.lensesdict"><code>PhaseRetrieval.lensesdict</code></a></li><li><a href="#PhaseRetrieval.AbstractPRproblem"><code>PhaseRetrieval.AbstractPRproblem</code></a></li><li><a href="#PhaseRetrieval.CameraChip"><code>PhaseRetrieval.CameraChip</code></a></li><li><a href="#PhaseRetrieval.Fourier"><code>PhaseRetrieval.Fourier</code></a></li><li><a href="#PhaseRetrieval.GS"><code>PhaseRetrieval.GS</code></a></li><li><a href="#PhaseRetrieval.GSparam"><code>PhaseRetrieval.GSparam</code></a></li><li><a href="#PhaseRetrieval.ImagingLens"><code>PhaseRetrieval.ImagingLens</code></a></li><li><a href="#PhaseRetrieval.ImagingSensor"><code>PhaseRetrieval.ImagingSensor</code></a></li><li><a href="#PhaseRetrieval.PRproblem"><code>PhaseRetrieval.PRproblem</code></a></li><li><a href="#PhaseRetrieval.SimConfig"><code>PhaseRetrieval.SimConfig</code></a></li><li><a href="#PhaseRetrieval.hwConfig-Tuple{String, Any, Any, Any}"><code>PhaseRetrieval.hwConfig</code></a></li><li><a href="#AlternatingProjections.AbstractProblems.solve-Tuple{PRproblem, GSparam, Vararg{Any, 5}}"><code>AlternatingProjections.AbstractProblems.solve</code></a></li><li><a href="#PhaseRetrieval.SHdiversity-Tuple{AbstractRange, AbstractRange, Any, Any, Any}"><code>PhaseRetrieval.SHdiversity</code></a></li><li><a href="#PhaseRetrieval.SHdiversity"><code>PhaseRetrieval.SHdiversity</code></a></li><li><a href="#PhaseRetrieval.appsftoPR-Tuple{Any, Any}"><code>PhaseRetrieval.appsftoPR</code></a></li><li><a href="#PhaseRetrieval.diaphragm-Tuple{ImagingLens, Float64}"><code>PhaseRetrieval.diaphragm</code></a></li><li><a href="#PhaseRetrieval.focaldistance-Tuple{ImagingSensor}"><code>PhaseRetrieval.focaldistance</code></a></li><li><a href="#PhaseRetrieval.logrescale"><code>PhaseRetrieval.logrescale</code></a></li><li><a href="#PhaseRetrieval.phwrap-Tuple{AbstractFloat}"><code>PhaseRetrieval.phwrap</code></a></li><li><a href="#PhaseRetrieval.psf-Tuple{AbstractArray}"><code>PhaseRetrieval.psf</code></a></li><li><a href="#PhaseRetrieval.roi-Tuple{CameraChip, Tuple{Int64, Int64}}"><code>PhaseRetrieval.roi</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="about/">About »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 10 July 2023 12:55">Monday 10 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
